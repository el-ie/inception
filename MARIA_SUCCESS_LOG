17 avril

mysql -u root
: est ce que MARIADB_USER doit etre celui qui se connecte au prompt ??

https://mariadb.com/kb/en/mariadb-basics/
mysql -u root -p -h localhost

en local pas besoin de -h localhost, pas meme besoin de -u root ?

Creating a structure

CREATE DATABASE bookstore;

USE bookstore;

USE will set the database as the default database
https://mariadb.com/kb/en/configuring-mariadb-for-remote-client-access/

SUCCESS :

dans le container de la database dans le fichier /etc/mysql/my.cnf rajouter :
[mysqld]
bind-address = 0.0.0.0


container parent :

CREATE DATABASE bookstore;
USE bookstore;

CREATE TABLE books (
isbn CHAR(20) PRIMARY KEY, 
title VARCHAR(50),
author_id INT,
publisher_id INT,
year_pub CHAR(4),
description TEXT );

GRANT ALL PRIVILEGES ON *.* TO 'testuser'@'db1.mariadb_testnetwork' IDENTIFIED BY 'pass' WITH GRANT OPTION;

container client :
mysql -h db2 -u testuser -p
Enter password: 
Welcome to the MariaDB monitor.  Commands end with ; or \g.
USE <database>; choisir une database
DESCRIBE <table>; montrer la table cree dans l'autre container

-------------------------------------------

SUCCESS DANS LES VRAIS CONTAINERS :

container mariadb :

dans le container mariadb dans le fichier /etc/mysql/my.cnf rajouter :
[mysqld]
bind-address = 0.0.0.0

GRANT ALL PRIVILEGES ON *.* TO 'tobi'@'wordpress.srcs_testnetwork' IDENTIFIED BY 'pass' WITH GRANT OPTION;

CREATE DATABASE datata;

-------------------
root@ab7e6bf3d2ab:/# mysql -u root -p
Enter password: 
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 42
Server version: 10.3.38-MariaDB-0+deb10u1 Debian 10

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]> CREATE DATABASE wordpress;
Query OK, 1 row affected (0.000 sec)

MariaDB [(none)]> CREATE USER 'wordpressuser'@'localhost' IDENTIFIED BY 'password';
Query OK, 0 rows affected (0.000 sec)

MariaDB [(none)]> GRANT ALL PRIVILEGES ON wordpress.* TO 'wordpressuser'@'localhost';
Query OK, 0 rows affected (0.000 sec)

MariaDB [(none)]> 
MariaDB [(none)]> CREATE DATABASE datata;
Query OK, 1 row affected (0.000 sec)

MariaDB [(none)]> CREATE USER 'tobi'@'localhost' IDENTIFIED BY 'pass'
    -> 
    -> 
    -> 
    -> Ctrl-C -- exit!
Aborted
root@ab7e6bf3d2ab:/# mysql -u root -p
Enter password: 
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 60
Server version: 10.3.38-MariaDB-0+deb10u1 Debian 10

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]> CREATE USER 'tobi'@'localhost' IDENTIFIED BY 'pass';
Query OK, 0 rows affected (0.000 sec)

MariaDB [(none)]> GRANT ALL PRIVILEGES ON datata.* TO 'tobi'@'localhost';
Query OK, 0 rows affected (0.000 sec)

MariaDB [(none)]> history
    -> Ctrl-C -- exit!
Aborted

